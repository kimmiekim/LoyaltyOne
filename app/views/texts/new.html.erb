
<div class="container">
  <div ng-controller="mainController as vm">
    <form novalidate>
      Text: <input type="text" ng-model="text" /><br />
      Username: <input type="text" ng-model="username" /><br />
      <input type="submit" value="Done" ng-click="vm.sendText(text, username, $event)" />
      <h1>{{ vm.latest.text }}</h1>
    </form>

    <% if false %>
    <%= form_for @text, :html => {:'ng-submit' => 'vm.sendText(text, username, $event)'} do |f| %>
      <%= f.label :text %>:
      <%= f.text_field :text, data: {"ng-model" => "text"} %><br />
      <%= f.label :username %>:
      <%= f.text_field :text, data: {"ng-model" => "username" }%><br />
      <%= f.button "DONE", type: "button", data: {"ng-click" => "vm.sendText(text, username, $event)"} %>
      <h1>{{ vm.latest.text }}</h1>
    <% end %>
    <% end %>

    <div ng-repeat="textObj in vm.textList">
      <ul>
      <li>{{ textObj.text }}</li>
      <li>{{ textObj.username }}</li>
      <form novalidate>
        Text: <input type="text" ng-model="reply_text" /><br />
        Username: <input type="text" ng-model="reply_username" /><br />
        <input type="submit" value="Reply" ng-click="vm.sendReply(reply_text, reply_username, textObj.id, $event)" />
      </form>
      </ul>
    </div>

  </div>

</div>
